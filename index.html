<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Advice Request Form - SOA</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Draft Selector -->
    <div class="draft-selector">
        <label for="draftSelector">Load Draft:</label>
        <select id="draftSelector">
            <option value="">Select a saved draft...</option>
        </select>
        <button type="button" class="btn btn-sm" id="loadDraftBtn">Load</button>
        <button type="button" class="btn btn-danger btn-sm" id="deleteDraftBtn">Delete</button>
    </div>

    <div class="container">
        <h1>Statement of Advice Request Form</h1>
        
        <!-- Client Type Section -->
        <section class="section" id="clientTypeSection">
            <h2><i class="fas fa-user-circle"></i> Client Details</h2>
            
            <!-- New/Existing Client Selector -->
            <div class="form-group">
                <label>Client Status:</label>
                <div class="radio-group">
                    <div class="radio-item">
                        <input type="radio" id="newClient" name="clientStatus" value="new">
                        <label for="newClient">
                            <i class="fas fa-plus-circle"></i>
                            New Client
                        </label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="existingClient" name="clientStatus" value="existing">
                        <label for="existingClient">
                            <i class="fas fa-user-check"></i>
                            Existing Client
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- Client Type Selector -->
            <div class="form-group">
                <label>Select Client Type (multiple selections allowed):</label>
                <div class="checkbox-group client-types">
                    <div class="checkbox-item">
                        <input type="checkbox" id="singleClient" name="clientType" value="single">
                        <label for="singleClient">
                            <i class="fas fa-user"></i>
                            Single Client
                        </label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="coupleClient" name="clientType" value="couple">
                        <label for="coupleClient">
                            <i class="fas fa-users"></i>
                            Couple
                        </label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="dependantsClient" name="clientType" value="dependants">
                        <label for="dependantsClient">
                            <i class="fas fa-child"></i>
                            Dependants
                        </label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="entityClient" name="clientType" value="entity">
                        <label for="entityClient">
                            <i class="fas fa-building"></i>
                            Entity
                        </label>
                    </div>
                </div>
                
                <!-- Entity Type Selector (shows only when entity is selected) -->
                <div class="entity-selector" id="entitySelector">
                    <label>Select Entity Type:</label>
                    <div class="checkbox-group entity-types">
                        <div class="checkbox-item">
                            <input type="checkbox" id="entitySMSF" name="entityType" value="SMSF">
                            <label for="entitySMSF">SMSF</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="entityTrust" name="entityType" value="Trust">
                            <label for="entityTrust">Trust</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="entityCompany" name="entityType" value="Company">
                            <label for="entityCompany">Company</label>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Strategy Details Section -->
        <section class="section" id="strategyDetailsSection">
            <h2><i class="fas fa-info-circle"></i> Strategy Details</h2>
            
            <div class="grid-2">
                <div class="form-group" id="clientNameGroup">
                    <label for="clientName">Client 1 Name:</label>
                    <input type="text" id="clientName" name="clientName" placeholder="Enter client name">
                </div>
                
                <div class="form-group" id="partnerNameGroup" style="display: none;">
                    <label for="partnerName">Client 2 Name (Spouse):</label>
                    <input type="text" id="partnerName" name="partnerName" placeholder="Enter partner name">
                </div>
            </div>
            
            <div class="form-group" id="entityNameGroup" style="display: none;">
                <label for="entityName">Entity Name:</label>
                <input type="text" id="entityName" name="entityName" placeholder="Enter entity name">
            </div>
            
            <div class="grid-2">
                <div class="form-group">
                    <label for="xplanId">Xplan ID (if applicable):</label>
                    <input type="text" id="xplanId" name="xplanId" placeholder="Enter Xplan ID">
                </div>
                
                <div class="form-group">
                    <label for="adviserName">Adviser Name:</label>
                    <input type="text" id="adviserName" name="adviserName" placeholder="Enter adviser name">
                </div>
            </div>
            
            <div class="grid-2">
                <div class="form-group">
                    <label for="clientMeetingDate">Client Meeting Date:</label>
                    <input type="date" id="clientMeetingDate" name="clientMeetingDate">
                </div>
                
                <div class="form-group">
                    <label for="formCompletedBy">Form Completed by:</label>
                    <input type="text" id="formCompletedBy" name="formCompletedBy" placeholder="Enter your name">
                </div>
            </div>
        </section>
        
        <!-- Strategy Recommendations Section -->
        <section class="section" id="strategyRecommendationsSection">
            <h2><i class="fas fa-lightbulb"></i> Strategy Recommendations</h2>
            
            <div id="recommendationsSectionsContainer">
                <!-- Dynamic recommendation sections will be added here -->
            </div>
            
            <div class="form-group">
                <label for="goalAlignment">How strategy aligns to goals and objectives?</label>
                <textarea id="goalAlignment" name="goalAlignment" placeholder="Explain how the strategy aligns with client goals and objectives"></textarea>
            </div>
            
            <div class="form-group">
                <label for="mdaDetails">MDA Personalisation:</label>
                <textarea id="mdaDetails" name="mdaDetails" placeholder="Enter MDA personalisation details"></textarea>
            </div>
            
            <div class="form-group">
                <label for="tmdDetails">TMD:</label>
                <textarea id="tmdDetails" name="tmdDetails" placeholder="Enter TMD details"></textarea>
            </div>
            
            <div class="form-group">
                <label for="inaccurateInfo">Any potentially inaccurate or incomplete information:</label>
                <textarea id="inaccurateInfo" name="inaccurateInfo" placeholder="Include reasons why information may be inaccurate or was not provided"></textarea>
            </div>
            
            <div class="form-group">
                <label for="alternativeStrategies">Alternatives - strategies:</label>
                <textarea id="alternativeStrategies" name="alternativeStrategies" placeholder="Enter alternative strategies"></textarea>
            </div>
            
            <div class="form-group">
                <label for="alternativePlatforms">
                    Alternatives - platforms:
                    <span class="inline-checkbox">
                        <input type="checkbox" id="paraplannerCompare" name="paraplannerCompare">
                        <label for="paraplannerCompare">Paraplanner to complete compare</label>
                    </span>
                </label>
                <textarea id="alternativePlatforms" name="alternativePlatforms" placeholder="Enter alternative platforms"></textarea>
            </div>
        </section>
        
        <!-- Flowchart Section -->
        <section class="section" id="flowchartSection">
            <h2><i class="fas fa-project-diagram"></i> Flowchart</h2>
            
            <div class="form-group">
                <div class="yes-no-label">
                    <label for="flowchartRequired">Flowchart required?</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="flowchartRequired" name="flowchartRequired">
                        <span class="slider"></span>
                    </label>
                    <span id="flowchartStatus">No</span>
                </div>
            </div>
        </section>
        
        <!-- SOA Projections Section -->
        <section class="section" id="soaProjectionsSection">
            <h2><i class="fas fa-chart-line"></i> SOA Projections</h2>
            
            <div class="form-group">
                <label for="projectionDateLength">Projection date length:</label>
                <select id="projectionDateLength" name="projectionDateLength">
                    <option value="lifeExpectancy">Life Expectancy (default)</option>
                    <option value="lifeExpectancy5">Life Expectancy + 5 years</option>
                    <option value="lifeExpectancy10">Life Expectancy + 10 years</option>
                    <option value="5">5 years</option>
                    <option value="10">10 years</option>
                    <option value="15">15 years</option>
                    <option value="20">20 years</option>
                    <option value="other">Other</option>
                </select>
            </div>
            
            <div class="form-group" id="otherProjectionLength" style="display: none;">
                <label for="otherProjectionLengthValue">Specify other projection length:</label>
                <input type="number" id="otherProjectionLengthValue" name="otherProjectionLengthValue" placeholder="Enter number of years">
            </div>
            
            <div class="form-group">
                <div class="checklist-item">
                    <input type="checkbox" id="calmChart" name="projectionOptions" value="CALM">
                    <label for="calmChart">CALM to chart, cashflow consolidated table, asset summary chart and table</label>
                </div>
                
                <div class="checklist-item">
                    <input type="checkbox" id="contributionsTable" name="projectionOptions" value="Contributions">
                    <label for="contributionsTable">If contributions advice is relevant, we need a before and after tax table Year 1</label>
                </div>
                
                <div class="checklist-item">
                    <input type="checkbox" id="pensionTable" name="projectionOptions" value="Pension">
                    <label for="pensionTable">If aged pension advice is relevant we need a before and after aged pension table Year 1</label>
                </div>
                
                <div class="checklist-item">
                    <input type="checkbox" id="insuranceProjection" name="projectionOptions" value="Insurance">
                    <label for="insuranceProjection">If insurance advice is relevant we need insurance premiums 10 years with premiums indexed at 10%</label>
                </div>
            </div>
        </section>
        
        <!-- SOA Fees Section -->
        <section class="section" id="soaFeesSection">
            <h2><i class="fas fa-dollar-sign"></i> SOA Fees</h2>
            
            <div class="grid-2">
                <div class="form-group">
                    <label for="upfrontFee">Upfront Fee (including GST):</label>
                    <input type="text" id="upfrontFee" name="upfrontFee" placeholder="Enter upfront fee">
                </div>
                
                <div class="form-group">
                    <label for="paymentMethod">Method of payment:</label>
                    <input type="text" id="paymentMethod" name="paymentMethod" placeholder="Enter payment method">
                </div>
            </div>
            
            <div class="grid-2">
                <div class="form-group">
                    <label for="implementationFee">Implementation fee:</label>
                    <input type="text" id="implementationFee" name="implementationFee" placeholder="Enter implementation fee">
                </div>
                
                <div class="form-group">
                    <label for="ongoingFee">Ongoing Fee (including GST):</label>
                    <input type="text" id="ongoingFee" name="ongoingFee" placeholder="Refer to pricing calculator">
                </div>
            </div>
            
            <div id="dynamicFeesContainer">
                <!-- Dynamic fees will be added here based on entity selections -->
            </div>
            
            <div class="form-group">
                <label for="referralFee">Referral Fee Applicable:</label>
                <input type="text" id="referralFee" name="referralFee" placeholder="Enter referral fee or N/A">
            </div>
        </section>
        
        <!-- Additional Comments Section -->
        <section class="section" id="additionalCommentsSection">
            <h2><i class="fas fa-comment-alt"></i> Additional Comments/Notes</h2>
            
            <div class="form-group">
                <textarea id="additionalComments" name="additionalComments" placeholder="Enter any additional comments or notes"></textarea>
            </div>
        </section>
        
        <!-- Compliance Checklist Section -->
        <section class="section" id="checklistSection">
            <h2><i class="fas fa-tasks"></i> Compliance Checklist</h2>
            
            <div class="note">
                <p>Please ensure the required documents and approvals are obtained and uploaded prior to submitting your request to the paraplanning team.</p>
            </div>
            
            <h3>All Advice documents</h3>
            <div class="form-group">
                <div class="checklist-item">
                    <input type="checkbox" id="factFind" name="requiredDocs" value="FactFind">
                    <label for="factFind">Fact Find (dated within 12 months)</label>
                </div>
                
                <div class="checklist-item">
                    <input type="checkbox" id="filenote" name="requiredDocs" value="Filenote">
                    <label for="filenote">Filenote</label>
                </div>
                
                <div class="checklist-item">
                    <input type="checkbox" id="pricingCalculator" name="requiredDocs" value="PricingCalculator">
                    <label for="pricingCalculator">Pricing Calculator</label>
                </div>
                
                <div class="checklist-item">
                    <input type="checkbox" id="beneficiaryNomination" name="compliance" value="BeneficiaryNomination">
                    <label for="beneficiaryNomination">Beneficiary nomination advice made (if relevant)</label>
                </div>
            </div>
            
            <h3>Compliance Requirements</h3>
            <div id="complianceRequirements">
                <!-- Dynamic compliance requirements will be added here -->
            </div>
        </section>
        
        <!-- Save Draft Modal -->
        <div id="saveDraftModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h3>Save Draft</h3>
                <div class="form-group">
                    <label for="draftName">Draft Name:</label>
                    <input type="text" id="draftName" placeholder="Enter draft name (e.g., Client Name ARF)">
                </div>
                <div class="modal-buttons">
                    <button type="button" class="btn btn-success" id="confirmSaveDraft">Save</button>
                    <button type="button" class="btn btn-danger" id="cancelSaveDraft">Cancel</button>
                </div>
            </div>
        </div>
        
        <!-- Button Group -->
        <div class="btn-group">
            <button type="button" class="btn" id="saveBtn">
                <i class="fas fa-save"></i> Save as Draft
            </button>
            <button type="button" class="btn btn-success" id="exportWordBtn">
                <i class="fas fa-file-word"></i> Export to Word
            </button>
            <button type="button" class="btn btn-success" id="exportPdfBtn">
                <i class="fas fa-file-pdf"></i> Export to PDF
            </button>
            <button type="button" class="btn btn-primary" id="saveToXplanBtnBottom">
                <i class="fas fa-cloud-upload-alt"></i> Save to Xplan
            </button>
            <button type="button" class="btn btn-primary" id="emailDocumentBtnBottom">
                <i class="fas fa-envelope"></i> Email Document
            </button>
            <button type="button" class="btn btn-danger" id="resetBtn">
                <i class="fas fa-undo"></i> Reset Form
            </button>
        </div>
    </div>

    <!-- Auto-save indicator -->
    <div id="autoSaveIndicator" class="auto-save-indicator">
        <i class="fas fa-save"></i> Auto-saved
    </div>

    <script src="script.js"></script>
</body>
</html>
